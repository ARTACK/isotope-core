var Isotope={toggleAddressFields:function(a,b){if(a.value=="0"&&a.checked){$(b).setStyle("display","block")}else{$(b).setStyle("display","none")}},displayBox:function(e){var d=$("iso_ajaxBox");var b=$("iso_ajaxOverlay");if(!b){b=new Element("div").setProperty("id","iso_ajaxOverlay").injectInside($(document.body))}if(!d){d=new Element("div").setProperty("id","iso_ajaxBox").injectInside($(document.body))}var a=window.getScroll().y;if(Browser.Engine.trident&&Browser.Engine.version<5){var f=$$("select");for(var c=0;c<f.length;c++){f[c].setStyle("visibility","hidden")}}b.setStyle("display","block");b.setStyle("top",a+"px");d.set("html",e);d.setStyle("display","block");d.setStyle("top",(a+100)+"px")},hideBox:function(){var c=$("iso_ajaxBox");var a=$("iso_ajaxOverlay");if(a){a.setStyle("display","none")}if(c){c.setStyle("display","none");if(Browser.Engine.trident&&Browser.Engine.version<5){var d=$$("select");for(var b=0;b<d.length;b++){d[b].setStyle("visibility","visible")}}}}};var IsotopeProduct=new Class({Implements:Options,Binds:["refresh"],options:{language:"en",page:0,action:"fmd",loadMessage:"Loading product data â€¦"},initialize:function(a,d,b,c){this.setOptions(c);this.form=document.id(("iso_product_"+d));if(this.form){this.form.set("send",{url:("ajax.php?action="+this.options.action+"&id="+a+"&language="+this.options.language+"&page="+this.options.page+"&product="+d),link:"cancel",onRequest:function(){Isotope.displayBox(this.options.loadMessage)}.bind(this),onSuccess:function(e,f){Isotope.hideBox();JSON.decode(e).each(function(i){var h=document.id(i.id);if(h){var j=null;var g=new Element("div").set("html",i.html).getElements("").each(function(k){if(k.get("id")==i.id){j=k}});if(j){if(j.get("tag")=="div"&&j.hasClass("radio_container")){j.getElements("input.radio").each(function(l,k){l.addEvent("click",this.refresh)}.bind(this))}j.cloneEvents(h).replaces(h)}}}.bind(this));window.fireEvent("ajaxready");$$(("#iso_product_"+d+" p.error")).destroy()}.bind(this),onFailure:function(){Isotope.hideBox()}});b.each(function(f,e){f=$(f);if(f&&f.get("tag")=="div"&&f.hasClass("radio_container")){f.getElements("input.radio").each(function(g){g.addEvent("click",this.refresh)}.bind(this))}else{if(f){f.addEvent("change",this.refresh)}}}.bind(this))}},refresh:function(a){this.form.send()}});