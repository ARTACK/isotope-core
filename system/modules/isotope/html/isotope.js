var Isotope={toggleAddressFields:function(a,b){if(a.value=="0"&&a.checked){$(b).setStyle("display","block")}else{$(b).setStyle("display","none")}},displayBox:function(e,g){var d=$("iso_ajaxBox");var b=$("iso_ajaxOverlay");if(!b){b=new Element("div").setProperty("id","iso_ajaxOverlay").injectInside($(document.body))}if(!d){d=new Element("div").setProperty("id","iso_ajaxBox").injectInside($(document.body))}if(g){b.addEvent("click",Isotope.hideBox);d.addClass("btnClose").addEvent("click",Isotope.hideBox)}var a=window.getScroll().y;if(Browser.Engine.trident&&Browser.Engine.version<5){var f=$$("select");for(var c=0;c<f.length;c++){f[c].setStyle("visibility","hidden")}}b.setStyle("display","block");b.setStyle("top",a+"px");d.set("html",e);d.setStyle("display","block");d.setStyle("top",(a+100)+"px")},hideBox:function(){var c=$("iso_ajaxBox");var a=$("iso_ajaxOverlay");if(a){a.setStyle("display","none").removeEvents("click")}if(c){c.setStyle("display","none").removeEvents("click").removeClass("btnClose");if(Browser.Engine.trident&&Browser.Engine.version<5){var d=$$("select");for(var b=0;b<d.length;b++){d[b].setStyle("visibility","visible")}}}},inlineGallery:function(b,a){$$(("#"+a+"_mediumsize img")).set("src",b.href);$$(("#"+a+"_gallery div, #"+a+"_gallery img")).removeClass("active");b.addClass("active");b.getChildren().addClass("active");return false}};var IsotopeProduct=new Class({Implements:Options,Binds:["refresh"],options:{language:"en",action:"fmd",page:0,loadMessage:"Loading product data â€¦"},initialize:function(a,d,e,b,c){this.setOptions(c);this.form=document.id(e);if(this.form){this.form.set("send",{url:("ajax.php?action="+this.options.action+"&id="+a+"&language="+this.options.language+"&page="+this.options.page+"&product="+d),link:"cancel",onRequest:function(){Isotope.displayBox(this.options.loadMessage)}.bind(this),onSuccess:function(f,g){Isotope.hideBox();var h=JSON.decode(f);REQUEST_TOKEN=h.token;document.getElements('input[type="hidden"][name="REQUEST_TOKEN"]').set("value",h.token);h.content.each(function(j){var i=document.id(j.id);if(i){var k=null;new Element("div").set("html",j.html).getElements("*").each(function(l){if(l.get("id")==j.id){k=l}});if(k){if(k.get("tag")=="div"&&k.hasClass("radio_container")){k.getElements("input.radio").each(function(m,l){m.addEvent("click",this.refresh)}.bind(this))}k.cloneEvents(i).replaces(i)}}}.bind(this));window.fireEvent("ajaxready");$$(("#"+e+" p.error")).destroy()}.bind(this),onFailure:function(){Isotope.hideBox()}});b.each(function(g,f){g=$(g);if(g&&g.get("tag")=="div"&&g.hasClass("radio_container")){g.getElements("input.radio").each(function(h){h.addEvent("click",this.refresh)}.bind(this))}else{if(g){g.addEvent("change",this.refresh)}}}.bind(this))}},refresh:function(a){this.form.send()}});